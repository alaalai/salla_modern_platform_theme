{# Account Page - صفحة الحساب #}
{% extends "layouts/master" %}

{% block content %}
<div class="account-page">
    <div class="container">
        <h1 class="page-title">{{ 'common.account' | t }}</h1>

        {% if customer %}
        <div class="account-grid">
            <section class="account-card">
                <h2 class="section-title">{{ customer.name }}</h2>
                <p class="text-muted">{{ customer.email }}</p>
                <p class="text-muted">{{ customer.phone }}</p>
                <a class="btn btn-outline" href="/logout">{{ 'common.logout' | t }}</a>
            </section>

            <section class="account-card">
                <h2 class="section-title">{{ 'header.orders' | default('الطلبات') }}</h2>
                {% if orders %}
                    <ul class="order-list">
                        {% for order in orders %}
                        <li class="order-item">
                            <div>
                                <p class="order-id">#{{ order.id }}</p>
                                <p class="order-date">{{ order.created_at | date('Y-m-d') }}</p>
                            </div>
                            <div class="order-status">{{ order.status }}</div>
                            <div class="order-total">{{ order.total | price }}</div>
                        </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p class="text-muted">{{ 'orders.empty' | default('لا توجد طلبات بعد') }}</p>
                {% endif %}
            </section>
        </div>
        {% else %}
            <div class="empty-state">
                <p>{{ 'common.login' | t }}</p>
                <a class="btn btn-primary" href="/login">{{ 'common.login' | t }}</a>
            </div>
        {% endif %}
    </div>
</div>

<style>
    .account-page { padding: var(--spacing-3xl) 0; }
    .account-grid { display: grid; grid-template-columns: repeat(auto-fit,minmax(300px,1fr)); gap: var(--spacing-xl); }
    .account-card { background: white; border: 1px solid var(--border-color); border-radius: var(--border-radius-md); padding: var(--spacing-lg); }
    .text-muted { color: var(--text-light); margin: 4px 0; }
    .order-list { list-style: none; margin: 0; padding: 0; display: flex; flex-direction: column; gap: 12px; }
    .order-item { display: grid; grid-template-columns: 1fr auto auto; gap: 12px; align-items: center; border: 1px solid var(--border-color); border-radius: 10px; padding: 12px; }
    .order-id { margin: 0; font-weight: 700; }
    .order-date { margin: 4px 0 0; color: var(--text-light); }
    .order-status { padding: 6px 12px; background: var(--secondary-color); border-radius: 9999px; font-weight: 600; }
    .order-total { font-weight: 800; color: var(--primary-color); }
    .empty-state { text-align: center; padding: var(--spacing-2xl); background: var(--secondary-color); border-radius: var(--border-radius-md); }
    @media (max-width: 640px) { .order-item { grid-template-columns: 1fr; text-align: left; } }
</style>
{% endblock %}
